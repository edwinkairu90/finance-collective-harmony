// Sample quarterly P&L data
export const plDataByQuarter = {
  "q1-2024": {
    title: "Q1 2024",
    endDate: "March 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 1250000 },
      { item: "Service Revenue", amount: 450000 },
      { item: "Subscription Revenue", amount: 320000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 620000 },
      { item: "Employee Salaries", amount: 380000 },
      { item: "Marketing Expenses", amount: 175000 },
      { item: "Rent & Utilities", amount: 85000 },
      { item: "Software & Tools", amount: 45000 },
      { item: "Insurance", amount: 28000 },
      { item: "Professional Services", amount: 65000 },
      { item: "Other Operating Expenses", amount: 95000 },
      { item: "Depreciation", amount: 35000 },
      { item: "Amortization", amount: 18000 },
    ]
  },
  "q4-2023": {
    title: "Q4 2023",
    endDate: "December 31, 2023",
    revenue: [
      { item: "Product Sales", amount: 1150000 },
      { item: "Service Revenue", amount: 420000 },
      { item: "Subscription Revenue", amount: 300000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 590000 },
      { item: "Employee Salaries", amount: 360000 },
      { item: "Marketing Expenses", amount: 165000 },
      { item: "Rent & Utilities", amount: 82000 },
      { item: "Software & Tools", amount: 42000 },
      { item: "Insurance", amount: 27000 },
      { item: "Professional Services", amount: 60000 },
      { item: "Other Operating Expenses", amount: 90000 },
      { item: "Depreciation", amount: 35000 },
      { item: "Amortization", amount: 18000 },
    ]
  },
  "q3-2023": {
    title: "Q3 2023",
    endDate: "September 30, 2023",
    revenue: [
      { item: "Product Sales", amount: 1050000 },
      { item: "Service Revenue", amount: 390000 },
      { item: "Subscription Revenue", amount: 280000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 560000 },
      { item: "Employee Salaries", amount: 340000 },
      { item: "Marketing Expenses", amount: 155000 },
      { item: "Rent & Utilities", amount: 80000 },
      { item: "Software & Tools", amount: 38000 },
      { item: "Insurance", amount: 26000 },
      { item: "Professional Services", amount: 55000 },
      { item: "Other Operating Expenses", amount: 85000 },
      { item: "Depreciation", amount: 34000 },
      { item: "Amortization", amount: 17000 },
    ]
  },
  "q2-2023": {
    title: "Q2 2023",
    endDate: "June 30, 2023",
    revenue: [
      { item: "Product Sales", amount: 980000 },
      { item: "Service Revenue", amount: 360000 },
      { item: "Subscription Revenue", amount: 260000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 520000 },
      { item: "Employee Salaries", amount: 320000 },
      { item: "Marketing Expenses", amount: 145000 },
      { item: "Rent & Utilities", amount: 78000 },
      { item: "Software & Tools", amount: 35000 },
      { item: "Insurance", amount: 25000 },
      { item: "Professional Services", amount: 52000 },
      { item: "Other Operating Expenses", amount: 82000 },
      { item: "Depreciation", amount: 34000 },
      { item: "Amortization", amount: 17000 },
    ]
  },
  "q1-2023": {
    title: "Q1 2023",
    endDate: "March 31, 2023",
    revenue: [
      { item: "Product Sales", amount: 920000 },
      { item: "Service Revenue", amount: 330000 },
      { item: "Subscription Revenue", amount: 230000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 490000 },
      { item: "Employee Salaries", amount: 300000 },
      { item: "Marketing Expenses", amount: 135000 },
      { item: "Rent & Utilities", amount: 75000 },
      { item: "Software & Tools", amount: 32000 },
      { item: "Insurance", amount: 24000 },
      { item: "Professional Services", amount: 48000 },
      { item: "Other Operating Expenses", amount: 78000 },
      { item: "Depreciation", amount: 33000 },
      { item: "Amortization", amount: 16000 },
    ]
  }
};

// Sample monthly P&L data
export const plDataByMonth = {
  "jan-2024": {
    title: "Jan 2024",
    endDate: "January 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 420000 },
      { item: "Service Revenue", amount: 150000 },
      { item: "Subscription Revenue", amount: 105000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 210000 },
      { item: "Employee Salaries", amount: 125000 },
      { item: "Marketing Expenses", amount: 58000 },
      { item: "Rent & Utilities", amount: 28000 },
      { item: "Software & Tools", amount: 15000 },
      { item: "Insurance", amount: 9000 },
      { item: "Professional Services", amount: 22000 },
      { item: "Other Operating Expenses", amount: 32000 },
      { item: "Depreciation", amount: 12000 },
      { item: "Amortization", amount: 6000 },
    ]
  },
  "feb-2024": {
    title: "Feb 2024",
    endDate: "February 29, 2024",
    revenue: [
      { item: "Product Sales", amount: 405000 },
      { item: "Service Revenue", amount: 145000 },
      { item: "Subscription Revenue", amount: 102000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 200000 },
      { item: "Employee Salaries", amount: 125000 },
      { item: "Marketing Expenses", amount: 56000 },
      { item: "Rent & Utilities", amount: 28000 },
      { item: "Software & Tools", amount: 15000 },
      { item: "Insurance", amount: 9000 },
      { item: "Professional Services", amount: 21000 },
      { item: "Other Operating Expenses", amount: 31000 },
      { item: "Depreciation", amount: 12000 },
      { item: "Amortization", amount: 6000 },
    ]
  },
  "mar-2024": {
    title: "Mar 2024",
    endDate: "March 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 425000 },
      { item: "Service Revenue", amount: 155000 },
      { item: "Subscription Revenue", amount: 113000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 210000 },
      { item: "Employee Salaries", amount: 130000 },
      { item: "Marketing Expenses", amount: 61000 },
      { item: "Rent & Utilities", amount: 29000 },
      { item: "Software & Tools", amount: 15000 },
      { item: "Insurance", amount: 10000 },
      { item: "Professional Services", amount: 22000 },
      { item: "Other Operating Expenses", amount: 32000 },
      { item: "Depreciation", amount: 11000 },
      { item: "Amortization", amount: 6000 },
    ]
  },
  "apr-2024": {
    title: "Apr 2024",
    endDate: "April 30, 2024",
    revenue: [
      { item: "Product Sales", amount: 438000 },
      { item: "Service Revenue", amount: 162000 },
      { item: "Subscription Revenue", amount: 118000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 219000 },
      { item: "Employee Salaries", amount: 132000 },
      { item: "Marketing Expenses", amount: 63000 },
      { item: "Rent & Utilities", amount: 29000 },
      { item: "Software & Tools", amount: 16000 },
      { item: "Insurance", amount: 10000 },
      { item: "Professional Services", amount: 23000 },
      { item: "Other Operating Expenses", amount: 33000 },
      { item: "Depreciation", amount: 11000 },
      { item: "Amortization", amount: 6000 },
    ]
  },
  "may-2024": {
    title: "May 2024",
    endDate: "May 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 446000 },
      { item: "Service Revenue", amount: 168000 },
      { item: "Subscription Revenue", amount: 121000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 223000 },
      { item: "Employee Salaries", amount: 134000 },
      { item: "Marketing Expenses", amount: 65000 },
      { item: "Rent & Utilities", amount: 30000 },
      { item: "Software & Tools", amount: 16000 },
      { item: "Insurance", amount: 10500 },
      { item: "Professional Services", amount: 24000 },
      { item: "Other Operating Expenses", amount: 34000 },
      { item: "Depreciation", amount: 11500 },
      { item: "Amortization", amount: 6500 },
    ]
  },
  "jun-2024": {
    title: "Jun 2024",
    endDate: "June 30, 2024",
    revenue: [
      { item: "Product Sales", amount: 455000 },
      { item: "Service Revenue", amount: 172000 },
      { item: "Subscription Revenue", amount: 124000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 230000 },
      { item: "Employee Salaries", amount: 138000 },
      { item: "Marketing Expenses", amount: 69000 },
      { item: "Rent & Utilities", amount: 30000 },
      { item: "Software & Tools", amount: 17000 },
      { item: "Insurance", amount: 11000 },
      { item: "Professional Services", amount: 25000 },
      { item: "Other Operating Expenses", amount: 35000 },
      { item: "Depreciation", amount: 12000 },
      { item: "Amortization", amount: 6500 },
    ]
  },
  "jul-2024": {
    title: "Jul 2024",
    endDate: "July 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 461000 },
      { item: "Service Revenue", amount: 175000 },
      { item: "Subscription Revenue", amount: 127000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 235000 },
      { item: "Employee Salaries", amount: 141000 },
      { item: "Marketing Expenses", amount: 72000 },
      { item: "Rent & Utilities", amount: 31000 },
      { item: "Software & Tools", amount: 17000 },
      { item: "Insurance", amount: 11000 },
      { item: "Professional Services", amount: 26000 },
      { item: "Other Operating Expenses", amount: 36000 },
      { item: "Depreciation", amount: 12000 },
      { item: "Amortization", amount: 7000 },
    ]
  },
  "aug-2024": {
    title: "Aug 2024",
    endDate: "August 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 468000 },
      { item: "Service Revenue", amount: 178000 },
      { item: "Subscription Revenue", amount: 130000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 238000 },
      { item: "Employee Salaries", amount: 142000 },
      { item: "Marketing Expenses", amount: 74000 },
      { item: "Rent & Utilities", amount: 31000 },
      { item: "Software & Tools", amount: 18000 },
      { item: "Insurance", amount: 11500 },
      { item: "Professional Services", amount: 27000 },
      { item: "Other Operating Expenses", amount: 37000 },
      { item: "Depreciation", amount: 12500 },
      { item: "Amortization", amount: 7000 },
    ]
  },
  "sep-2024": {
    title: "Sep 2024",
    endDate: "September 30, 2024",
    revenue: [
      { item: "Product Sales", amount: 476000 },
      { item: "Service Revenue", amount: 182000 },
      { item: "Subscription Revenue", amount: 134000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 243000 },
      { item: "Employee Salaries", amount: 145000 },
      { item: "Marketing Expenses", amount: 76000 },
      { item: "Rent & Utilities", amount: 32000 },
      { item: "Software & Tools", amount: 18000 },
      { item: "Insurance", amount: 12000 },
      { item: "Professional Services", amount: 28000 },
      { item: "Other Operating Expenses", amount: 38000 },
      { item: "Depreciation", amount: 13000 },
      { item: "Amortization", amount: 7500 },
    ]
  },
  "oct-2024": {
    title: "Oct 2024",
    endDate: "October 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 485000 },
      { item: "Service Revenue", amount: 185000 },
      { item: "Subscription Revenue", amount: 138000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 248000 },
      { item: "Employee Salaries", amount: 148000 },
      { item: "Marketing Expenses", amount: 78000 },
      { item: "Rent & Utilities", amount: 32000 },
      { item: "Software & Tools", amount: 19000 },
      { item: "Insurance", amount: 12000 },
      { item: "Professional Services", amount: 29000 },
      { item: "Other Operating Expenses", amount: 39000 },
      { item: "Depreciation", amount: 13000 },
      { item: "Amortization", amount: 7500 },
    ]
  },
  "nov-2024": {
    title: "Nov 2024",
    endDate: "November 30, 2024",
    revenue: [
      { item: "Product Sales", amount: 490000 },
      { item: "Service Revenue", amount: 188000 },
      { item: "Subscription Revenue", amount: 142000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 255000 },
      { item: "Employee Salaries", amount: 150000 },
      { item: "Marketing Expenses", amount: 80000 },
      { item: "Rent & Utilities", amount: 33000 },
      { item: "Software & Tools", amount: 19000 },
      { item: "Insurance", amount: 12500 },
      { item: "Professional Services", amount: 30000 },
      { item: "Other Operating Expenses", amount: 40000 },
      { item: "Depreciation", amount: 13500 },
      { item: "Amortization", amount: 8000 },
    ]
  },
  "dec-2024": {
    title: "Dec 2024",
    endDate: "December 31, 2024",
    revenue: [
      { item: "Product Sales", amount: 510000 },
      { item: "Service Revenue", amount: 195000 },
      { item: "Subscription Revenue", amount: 148000 },
    ],
    expenses: [
      { item: "Cost of Goods Sold", amount: 265000 },
      { item: "Employee Salaries", amount: 155000 },
      { item: "Marketing Expenses", amount: 84000 },
      { item: "Rent & Utilities", amount: 34000 },
      { item: "Software & Tools", amount: 20000 },
      { item: "Insurance", amount: 13000 },
      { item: "Professional Services", amount: 32000 },
      { item: "Other Operating Expenses", amount: 42000 },
      { item: "Depreciation", amount: 14000 },
      { item: "Amortization", amount: 8500 },
    ]
  }
};

// Get last 4 quarters
export const getLastFourQuarters = () => {
  const lastFourQuarters = ["q1-2024", "q4-2023", "q3-2023", "q2-2023"];
  return lastFourQuarters.map(q => plDataByQuarter[q]);
};

// Get all months for a specific year
export const getMonthsForYear = (year: number) => {
  const months = [
    "jan", "feb", "mar", "apr", "may", "jun", 
    "jul", "aug", "sep", "oct", "nov", "dec"
  ];
  
  return months.map(month => {
    const key = `${month}-${year}`;
    // If the data exists for this month and year, return it
    if (plDataByMonth[key]) {
      return plDataByMonth[key];
    }
    
    // Otherwise return a placeholder with zeros (for years other than 2024)
    return {
      title: `${month.charAt(0).toUpperCase() + month.slice(1)} ${year}`,
      endDate: `${month.charAt(0).toUpperCase() + month.slice(1)} ${year}`,
      revenue: [
        { item: "Product Sales", amount: 0 },
        { item: "Service Revenue", amount: 0 },
        { item: "Subscription Revenue", amount: 0 },
      ],
      expenses: [
        { item: "Cost of Goods Sold", amount: 0 },
        { item: "Employee Salaries", amount: 0 },
        { item: "Marketing Expenses", amount: 0 },
        { item: "Rent & Utilities", amount: 0 },
        { item: "Software & Tools", amount: 0 },
        { item: "Insurance", amount: 0 },
        { item: "Professional Services", amount: 0 },
        { item: "Other Operating Expenses", amount: 0 },
        { item: "Depreciation", amount: 0 },
        { item: "Amortization", amount: 0 },
      ]
    };
  });
};

// Type for a P&L item
export interface PLItem {
  item: string;
  amount: number;
}

// Type for quarterly data
export interface QuarterData {
  title: string;
  endDate: string;
  revenue: PLItem[];
  expenses: PLItem[];
}

// Type for quarterly totals
export interface QuarterlyTotals {
  title: string;
  totalRevenue: number;
  totalExpenses: number;
  netProfit: number;
}

// Type for P&L subtotals
export interface PLSubtotals {
  title: string;
  costOfSales: number;
  grossProfit: number;
  operatingExpenses: number;
  ebitda: number;
  depreciationAmortization: number;
  ebit: number;
}

// Monthly data totals calculation
export const calculateMonthlyTotals = (monthsData: QuarterData[]) => {
  return monthsData.map(month => {
    const totalRevenue = month.revenue.reduce((sum, item) => sum + item.amount, 0);
    const totalExpenses = month.expenses.reduce((sum, item) => sum + item.amount, 0);
    
    return {
      title: month.title,
      totalRevenue,
      totalExpenses,
      netProfit: totalRevenue - totalExpenses
    };
  });
};

// Annual totals calculation
export const calculateAnnualTotal = (monthsData: QuarterData[]) => {
  const totalRevenue = monthsData.reduce((sum, month) => 
    sum + month.revenue.reduce((monthSum, item) => monthSum + item.amount, 0), 0);
  
  const totalExpenses = monthsData.reduce((sum, month) => 
    sum + month.expenses.reduce((monthSum, item) => monthSum + item.amount, 0), 0);
  
  return {
    title: "Annual Total",
    totalRevenue,
    totalExpenses,
    netProfit: totalRevenue - totalExpenses
  };
};
